<!doctype html>
<html lang="es">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css2?family=Rubik+Dirt&display=swap" rel="stylesheet">
    <link rel="shortcut icon" href="https://i.imgur.com/ENUqZYh.png" type="image/x-icon">
    <title>Atomic Punch Shop</title>

    <!--Ajusto algunas cosas mediante CSS para ajustarlo mas a mi gusto personal-->
    <style>
        .cart {
            height: 100%; 
        }
        .card-item{
            max-height: 43vh;
            overflow-y: auto;
        }
        .titulo{
            padding: 10px;
            background-color: black;
            color: aliceblue;
            border-radius: 30px 30px 5px 5px;
            font-family: 'Rubik Dirt';
        }
        .footer{
            color: aliceblue;
            font-size: x-small;
            border-radius: 5px 5px 30px 30px;
            margin-top: 5px;
        }
        .cartaLista{
            padding: 10px;
            background-color: black;
            color: aliceblue;        
            background-image: url('https://i.imgur.com/7NFuqPa.jpg');
            background-size: cover;
            background-position: center; 
            background-repeat: no-repeat;
        }
        .cartaProducto{
            background-color: black;
            color: aliceblue;
            transition: 0.5s;
            border-radius: 5px 5px 30px 30px;
            height: 96%;
            overflow-y: hidden;
        }
        .cartaProducto:hover{
            box-shadow: 0px 0px 15px 5px rgb(255, 244, 182);
        }
    </style>
    
</head>
<body class="bg-dark">

    <div class="col-12 margin-auto mt-1 px-3 ">
        <h2 class="alert-warning p-3 text-center display-6 border border-3 border-ligth titulo">¡¡ATOMIC PUNCH!!</h2>
        <div class="row">
            <div class="col-md-8">

<!-- Productos__________________________________________________________________________ -->
                <!--Hay una sola row donde meti todos los productos dandoles unas medidas iniciales como md-4 o sm-6 para controlar las posiciones segun el tamaño de la pantalla
                la intencion de hacer una sola row y no varias es para que se ajusten solas dependiendo del tamaño y no queden salteadas.-->
                <div class="row">

                    <div class="col-md-4 col-sm-6">
                        <div class="card mt-2 border border-3 border-ligth cartaProducto" >
                            <img src="https://i.imgur.com/Wu0sWD4.jpg" class="card-img-top" alt="...">
                            <div class="card-body">
                                <h4 class="card-title">Classic</h4>
                                <ul class="list-unstyled">
                                    <li id="p1" data-precio="0.50"><b>Precio: 0.50 €</b></li>
                                    <li><input id="c1" type="number" class="form-control quantity" min="1" value="1"></li>
                                </ul>
                                <a href="#" onclick="añadirProd1()" class="btn btn-success">Añadir al carrito</a>
                            </div>
                          </div>
                    </div>

                    <div class="col-md-4 col-sm-6">
                        <div class="card mt-2 border border-3 border-ligth cartaProducto">
                            <img src="https://i.imgur.com/md71o4R.jpg" class="card-img-top" alt="...">
                            <div class="card-body">
                                <h4 class="card-title">Zero Azucar</h4>
                                <ul class="list-unstyled">
                                    <li id="p2" data-precio="0.50"><b>Precio: 0.50 €</b></li>
                                    <li><input id="c2" type="number" class="form-control quantity" min="1" value="1"></li>
                                </ul>
                                <a href="#" onclick="añadirProd2()" class="btn btn-success">Añadir al carrito</a>
                            </div>
                          </div>
                    </div>

                    <div class="col-md-4 col-sm-6">
                        <div class="card mt-2 border border-3 border-ligth cartaProducto">
                            <img src="https://i.imgur.com/gKReWfz.jpg" class="card-img-top" alt="...">
                            <div class="card-body">
                                <h4 class="card-title">Danger Lemon</h4>
                                <ul class="list-unstyled">
                                    <li id="p3" data-precio="1"><b>Precio: 1.00 €</b></li>
                                    <li><input id="c3" type="number" class="form-control quantity" min="1" value="1"></li>
                                </ul>
                                <a href="#" onclick="añadirProd3()" class="btn btn-success">Añadir al carrito</a>
                            </div>
                          </div>
                    </div>
                
                    <div class="col-md-4 col-sm-6">
                        <div class="card mt-2 border border-3 border-ligth cartaProducto">
                            <img src="https://i.imgur.com/muGPSnj.jpg" class="card-img-top" alt="...">
                            <div class="card-body">
                                <h4 class="card-title">Deep Berry</h4>
                                <ul class="list-unstyled">
                                    <li id="p4" data-precio="1.50"><b>Precio: 1.50 €</b></li>
                                    <li><input id="c4" type="number" class="form-control quantity" min="1" value="1"></li>
                                </ul>
                                <a href="#" onclick="añadirProd4()" class="btn btn-success">Añadir al carrito</a>
                            </div>
                          </div>
                    </div>

                    <div class="col-md-4 col-sm-6">
                        <div class="card mt-2 border border-3 border-ligth cartaProducto">
                            <img src="https://i.imgur.com/1bwfK3h.jpg" class="card-img-top" alt="...">
                            <div class="card-body">
                                <h4 class="card-title">Cosmic Grape</h4>
                                <ul class="list-unstyled">
                                    <li id="p5" data-precio="1.70"><b>Precio: 1.70 €</b></li>
                                    <li><input id="c5" type="number" class="form-control quantity" min="1" value="1"></li>
                                </ul>
                                <a href="#" onclick="añadirProd5()" class="btn btn-success">Añadir al carrito</a>
                            </div>
                          </div>
                    </div>

                    <div class="col-md-4 col-sm-6">
                        <div class="card mt-2 border border-3 border-ligth cartaProducto">
                            <img src="https://i.imgur.com/Agq5LEC.jpg" class="card-img-top" alt="...">
                            <div class="card-body">
                                <h4 class="card-title">Satanic Melon</h4>
                                <ul class="list-unstyled">
                                    <li id="p6" data-precio="1.70"><b>Precio: 1.70 €</b></li>
                                    <li><input id="c6" type="number" class="form-control quantity" min="1" value="1"></li>
                                </ul>
                                <a href="#" onclick="añadirProd6()" class="btn btn-success">Añadir al carrito</a>
                            </div>
                          </div>   
                    </div>

                </div>
            </div>
<!-- Productos__________________________________________________________________________ -->   

<!-- Carrito_______________________________________________________________ -->
 <!--Aqui esta la lista de la compra o la lista del carrito donde se iran sumando los productos que compremos, tambien estan los botones de compra y eliminar ultimo-->
            <div class="col-md-4 alturaPadre">
                <div class="cart card p-1 mt-2 border border-3 border-ligth cartaLista">
                    <h4 class="alert alert-primary text-center display-6">Carrito</h4>
                    <div 
                        class="card-item" id="carrito">
                    </div>
                        <p class="alert alert-primary text-center mt-auto">Total Carrito - <span id="total"><b>0.00</b></span> €</p>
                    <button class="btn btn-success w-100 mb-2" onclick="comprarCarrito()" id="comprar">Comprar Ahora</button>
                    <button class="btn btn-danger w-100" onclick="eliminarProducto()" id="vaciar">Eliminar Producto</button>
                </div>
            </div>
 <!-- Carrito_______________________________________________________________ -->
 
 <!-- Pie de Pagina_______________________________________________________________ -->
        </div>
        <p class="alert p-2 text-center footer">Trabajo para Desarrollo de Interfaces 2ºDAM -- Trabajo realizado por Diego Ramírez Marco -- Ilustraciones realizadas por Diego Ramírez Marco </p>
    </div>
<!-- Pie de Pagina_______________________________________________________________ -->

<!-- Scripts_______________________________________________________________ -->
    <script>
        let carrito = [];
        let totalCarrito = 0;
        
        //Funcion para añadir productos al carrito---------------------------------------
        //Cada funcion pertenece a un boton que crea el objeto concreto y lo añade al arrat del carrito y suma al totalCarrito el importe.
        function añadirProd1(){
            const precio = parseFloat(document.getElementById("p1").dataset.precio)
            const cantidad = parseInt(document.getElementById("c1").value)
            const subtotal = precio * cantidad
            totalCarrito+=subtotal

            const producto1 = {nombre: "Classic", precio:precio, cantidad:cantidad,subtotal:subtotal}
        
            carrito.push(producto1)
            actualizarACarritoDeCompra()
        }
        function añadirProd2(){
            const precio = parseFloat(document.getElementById("p2").dataset.precio)
            const cantidad = parseInt(document.getElementById("c2").value)
            const subtotal = precio * cantidad
            totalCarrito+=subtotal

            const producto1 = {nombre: "Zero", precio:precio, cantidad:cantidad,subtotal:subtotal}
            
            carrito.push(producto1)
            actualizarACarritoDeCompra()
        }
        function añadirProd3(){
            const precio = parseFloat(document.getElementById("p3").dataset.precio)
            const cantidad = parseInt(document.getElementById("c3").value)
            const subtotal = precio * cantidad
            totalCarrito+=subtotal

            const producto1 = {nombre: "Danger Lemon", precio:precio, cantidad:cantidad,subtotal:subtotal}
            
            carrito.push(producto1)
            actualizarACarritoDeCompra()
        }
        function añadirProd4(){
            const precio = parseFloat(document.getElementById("p4").dataset.precio)
            const cantidad = parseInt(document.getElementById("c4").value)
            const subtotal = precio * cantidad
            totalCarrito+=subtotal

            const producto1 = {nombre: "Deep Berry", precio:precio, cantidad:cantidad,subtotal:subtotal}
            
            carrito.push(producto1)
            actualizarACarritoDeCompra()
        }
        function añadirProd5(){
            const precio = parseFloat(document.getElementById("p5").dataset.precio)
            const cantidad = parseInt(document.getElementById("c5").value)
            const subtotal = precio * cantidad
            totalCarrito+=subtotal

            const producto1 = {nombre: "Cosmic Grape", precio:precio, cantidad:cantidad,subtotal:subtotal}
            
            carrito.push(producto1)
            actualizarACarritoDeCompra()
        }
        function añadirProd6(){
            const precio = parseFloat(document.getElementById("p6").dataset.precio)
            const cantidad = parseInt(document.getElementById("c6").value)
            const subtotal = precio * cantidad
            totalCarrito+=subtotal

            const producto1 = {nombre: "Satanic Melon", precio:precio, cantidad:cantidad,subtotal:subtotal}
            
            carrito.push(producto1)
            actualizarACarritoDeCompra()
        }
        //---------------------------------------------------------------------------------------------
        
        //Funcio para gestionar el array de la lista de compra ----------------------------------------
        //Crea divs en el card del carrito de la compra con los productos que hay almacenados en el array, se recorre el array y por cada
        //producto se pinta un div con el contenido del objeto
        function actualizarACarritoDeCompra(){
            let contenidoCarrito = document.getElementById("carrito")
            contenidoCarrito.innerHTML=""

            carrito.forEach((producto)=>{
                const crearDiv = document.createElement("div")
                crearDiv.innerHTML = `
                <h6>${producto.nombre}</h6>
                Precio : ${producto.precio} € /
                Cantidad x ${producto.cantidad} /
                Subtotal = ${producto.subtotal} €
                `
                contenidoCarrito.appendChild(crearDiv)
            })
            //Use toFixed para limitar el numero de decimales que muestra en el total de la compra
            document.getElementById("total").textContent = `Total: ${totalCarrito.toFixed(2)} `
        }
        //----------------------------------------------------------------------------------------------
       
        //Funcio para mostrar alerta y elimianr carrito al pulsar boton de compra-----------------------
        //Si el carrito esta lleno saldra una alerta con la informacion de la compra realizada y el importe total,
        //Tambien se restaurara el valor del total de Carrito a 0, en el caso de no haber nada que comprar nos saldra otra alerta
        function comprarCarrito(){
            if(carrito.length > 0){
            let cantidadProd = carrito.reduce((total,producto) => total + producto.cantidad,0)
            alert("TU COMPRA ES: "+ cantidadProd +" productos, con un importe total de "+ totalCarrito + " €")
            document.getElementById("total").textContent = "0.00"
            contenidoCarrito = document.getElementById("carrito");
            carrito = []
            totalCarrito = 0
            contenidoCarrito.innerHTML = ""
            }else{
                alert("Comprar nada es gratis")
            }

        }
        //----------------------------------------------------------------------------------------------

        //Funcion para eliminar el ultimo producto añadido ----------------------------------------
        //Se elimina el ultimo elemento que entro al array mendiante pop y se resta el valor del total, en el caso de no haber nada que
        //eliminar del carrito, nos mostrara una alerta.
        function eliminarProducto(){
            if(carrito.length > 0){
            let ultimoProd = carrito.pop()
            totalCarrito -= ultimoProd.subtotal
            actualizarACarritoDeCompra()
            }else{
                alert("El carrito esta vacio, ¿Que intentas borrar?")
            }
        }
        //----------------------------------------------------------------------------------------------

    </script>
<!-- Scripts_______________________________________________________________ -->
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
</body>

</html>
